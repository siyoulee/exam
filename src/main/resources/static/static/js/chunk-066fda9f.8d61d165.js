(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-066fda9f"],{3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"475d":function(e,t){},"6b54":function(e,t,a){"use strict";a("3846");var i=a("cb7c"),r=a("0bfb"),s=a("9e1e"),n="toString",o=/./[n],l=function(e){a("2aba")(RegExp.prototype,n,e,!0)};a("79e5")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?l((function(){var e=i(this);return"/".concat(e.source,"/","flags"in e?e.flags:!s&&e instanceof RegExp?r.call(e):void 0)})):o.name!=n&&l((function(){return o.call(this)}))},8130:function(e,t,a){"use strict";a("a437")},"87b3":function(e,t,a){var i=Date.prototype,r="Invalid Date",s="toString",n=i[s],o=i.getTime;new Date(NaN)+""!=r&&a("2aba")(i,s,(function(){var e=o.call(this);return e===e?n.call(this):r}))},a437:function(e,t,a){},bc79:function(e,t,a){"use strict";a.r(t);a("6b54"),a("87b3"),a("57e7");var i=function(){var e=this,t=e._self._c;return t("div",{},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],staticClass:"card"},[t("h2",{staticClass:"personal-title",staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[e._v("\n        题目列表\n        "),t("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("新增题目")])],1),t("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",staticStyle:{padding:"15px 20px 0"},attrs:{model:e.queryParams,inline:!0,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"题目名称:",prop:"questionName"}},[t("el-input",{attrs:{placeholder:"请输入题目名称",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery.apply(null,arguments)}},model:{value:e.queryParams.questionName,callback:function(t){e.$set(e.queryParams,"questionName",t)},expression:"queryParams.questionName"}})],1),t("el-form-item",{attrs:{label:"题目来源:",prop:"source"}},[t("el-select",{attrs:{placeholder:"请选择题目来源",clearable:""},model:{value:e.queryParams.source,callback:function(t){e.$set(e.queryParams,"source",t)},expression:"queryParams.source"}},e._l(e.sourceOptions,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"试卷名称:",prop:"paperId"}},[t("el-select",{attrs:{placeholder:"请选择试卷名称",clearable:""},model:{value:e.queryParams.paperId,callback:function(t){e.$set(e.queryParams,"paperId",t)},expression:"queryParams.paperId"}},e._l(e.paperNameOptions,(function(e){return t("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),t("el-form-item",{attrs:{label:"题目状态:",prop:"status"}},[t("el-radio",{staticStyle:{"margin-right":"20px"},attrs:{label:"1"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},[e._v("有效")]),t("el-radio",{attrs:{label:"0"},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},[e._v("停用")])],1),t("el-form-item",{staticStyle:{"margin-left":"60px"}},[t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.handleQuery}},[e._v("搜索")]),t("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],staticClass:"card",staticStyle:{height:"calc(100vh - 352px)","margin-bottom":"0"}},[t("div",{staticStyle:{height:"calc(100% - 80px)"}},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.list,height:"100%"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{label:"ID",align:"center",prop:"id",width:"60px"}}),t("el-table-column",{attrs:{label:"试卷名称",align:"center",prop:"paperName",width:"120px"}}),t("el-table-column",{attrs:{label:"题目名称",align:"left",prop:"questionName"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{"font-size":"16px"}},[e._v(e._s(a.row.questionName))])]}}])}),t("el-table-column",{attrs:{label:"题目来源",align:"center",prop:"source",width:"140px","show-overflow-tooltip":!0}}),t("el-table-column",{attrs:{label:"状态",align:"center",prop:"status",width:"60px"},scopedSlots:e._u([{key:"default",fn:function(a){return["1"===a.row.status?t("span",[e._v("有效")]):e._e(),"0"===a.row.status?t("span",[e._v("停用")]):e._e()]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{staticStyle:{"font-size":"16px"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.handleUpdate(a.row)}}},[e._v("修改")]),t("el-button",{staticStyle:{"font-size":"16px"},attrs:{size:"mini",type:"text"},on:{click:function(t){return e.changeTopicStatus(a.row)}}},[e._v(e._s("1"===a.row.status?"停用":"启用"))])]}}])})],1)],1),t("pagination",{attrs:{total:e.total,page:e.queryParams.page,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"page",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],staticClass:"card",staticStyle:{"margin-bottom":"0"}},[t("h2",{staticClass:"personal-title",staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[t("span",[e._v(e._s(e.title))]),t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-back"},on:{click:e.cancel}},[e._v("返 回")])],1),t("el-form",{ref:"form",staticClass:"edit-form",staticStyle:{padding:"20px 40px 30px"},attrs:{model:e.form,rules:e.rules,"label-width":"140px"}},[t("el-form-item",{attrs:{label:"题目名称（英文）:",prop:"questionNameEn"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入题目名称（英文）"},model:{value:e.form.questionNameEn,callback:function(t){e.$set(e.form,"questionNameEn",t)},expression:"form.questionNameEn"}})],1),t("el-form-item",{attrs:{label:"题目名称（中文）:",prop:"questionNameCn"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入题目名称（中文）"},model:{value:e.form.questionNameCn,callback:function(t){e.$set(e.form,"questionNameCn",t)},expression:"form.questionNameCn"}})],1),e._l(e.answerList,(function(a,i){return[t("el-form-item",{attrs:{label:"答案（英文）:",prop:"answerContentEn"}},[t("el-input",{staticStyle:{width:"calc(100% - 185px)"},attrs:{type:"textarea",placeholder:"请输入答案（英文）"},model:{value:a.answerContentEn,callback:function(t){e.$set(a,"answerContentEn",t)},expression:"item.answerContentEn"}},[t("template",{slot:"append"})],2),0===i?t("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleAddAnswer(a,i)}}},[e._v("新增答案")]):e._e(),i>0?t("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",plain:"",icon:"el-icon-minus"},on:{click:function(t){return e.handleRemoveAnswer(a,i)}}},[e._v("删除答案")]):e._e(),t("div",{class:a.correct&&"answer-checked",staticStyle:{display:"inline-block",cursor:"pointer","vertical-align":"middle",float:"right",padding:"0 10px"},on:{click:function(t){return e.handleAnswerClick(a,i)}}},[t("i",{staticClass:"el-icon-circle-check"}),e._v(" 正确")])],1),t("el-form-item",{attrs:{label:"答案（中文）:",prop:"answerContentCn"}},[t("el-input",{staticStyle:{width:"calc(100% - 185px)"},attrs:{type:"textarea",placeholder:"请输入答案（中文）"},model:{value:a.answerContentCn,callback:function(t){e.$set(a,"answerContentCn",t)},expression:"item.answerContentCn"}})],1)]})),t("el-form-item",{attrs:{label:"题目难度:",prop:"difficulty"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择题目难度",clearable:""},model:{value:e.form.difficulty,callback:function(t){e.$set(e.form,"difficulty",t)},expression:"form.difficulty"}},[t("el-option",{attrs:{label:"S+",value:"4"}}),t("el-option",{attrs:{label:"S",value:"3"}}),t("el-option",{attrs:{label:"A",value:"2"}}),t("el-option",{attrs:{label:"B",value:"1"}}),t("el-option",{attrs:{label:"C",value:"0"}})],1)],1),t("el-form-item",{attrs:{label:"题目置信度:",prop:"confidence"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择题目状态",clearable:""},model:{value:e.form.confidence,callback:function(t){e.$set(e.form,"confidence",t)},expression:"form.confidence"}},[t("el-option",{attrs:{label:"正确",value:"3"}}),t("el-option",{attrs:{label:"高",value:"2"}}),t("el-option",{attrs:{label:"中",value:"1"}}),t("el-option",{attrs:{label:"低",value:"0"}})],1)],1),t("el-form-item",{attrs:{label:"所属试卷:",prop:"paperId"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择所属试卷",clearable:""},model:{value:e.form.paperId,callback:function(t){e.$set(e.form,"paperId",t)},expression:"form.paperId"}},e._l(e.paperNameOptions,(function(e){return t("el-option",{key:e.dictValue,attrs:{label:e.dictLabel,value:e.dictValue}})})),1)],1),t("el-form-item",{attrs:{label:"视频解析地址:",prop:"videoUrl"}},[t("el-input",{attrs:{placeholder:"请输入视频解析地址"},model:{value:e.form.videoUrl,callback:function(t){e.$set(e.form,"videoUrl",t)},expression:"form.videoUrl"}})],1),t("el-form-item",{attrs:{label:"视频签名:",prop:"videoSign"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入视频解析地址","show-word-limit":""},model:{value:e.form.videoSign,callback:function(t){e.$set(e.form,"videoSign",t)},expression:"form.videoSign"}})],1),t("el-form-item",{attrs:{label:"题目解释:",prop:"clarify"}},[e.isEdit?t("CKEditor",{model:{value:e.form.clarify,callback:function(t){e.$set(e.form,"clarify",t)},expression:"form.clarify"}}):e._e()],1),t("el-form-item",{attrs:{label:"问题分数:",prop:"questionPoints"}},[t("el-input-number",{attrs:{min:1,max:100,label:"请输入问题分数"},model:{value:e.form.questionPoints,callback:function(t){e.$set(e.form,"questionPoints",t)},expression:"form.questionPoints"}})],1),t("el-form-item",{attrs:{label:"问题主题:",prop:"questionSubject"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择问题主题",clearable:""},model:{value:e.form.questionSubject,callback:function(t){e.$set(e.form,"questionSubject",t)},expression:"form.questionSubject"}},e._l(e.questionSubjectOptions,(function(e,a){return t("el-option",{key:a,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"问题类型:",prop:"questionType"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择问题类型",clearable:""},model:{value:e.form.questionType,callback:function(t){e.$set(e.form,"questionType",t)},expression:"form.questionType"}},e._l(e.questionTypeOptions,(function(e){return t("el-option",{key:e.toString(),attrs:{label:e.toString(),value:e.toString()}})})),1)],1),t("el-form-item",{attrs:{label:"题目来源:",prop:"source"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择题目来源",clearable:""},model:{value:e.form.source,callback:function(t){e.$set(e.form,"source",t)},expression:"form.source"}},e._l(e.sourceOptions,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),t("el-form-item",{attrs:{label:"题目状态:",prop:"status"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择题目状态",clearable:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[t("el-option",{attrs:{label:"有效",value:"1"}}),t("el-option",{attrs:{label:"停用",value:"0"}})],1)],1),t("div",{staticClass:"tc",staticStyle:{"padding-top":"10px"}},[t("el-button",{staticStyle:{width:"150px"},on:{click:e.cancel}},[e._v("返 回")]),t("el-button",{staticStyle:{width:"150px","margin-left":"50px"},attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("提 交")])],1)],2)],1)])},r=[],s=(a("d25f"),a("28a5"),a("6d67"),a("cabd")),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"editor"}})},o=[],l={name:"CKEditor",props:{value:{type:String,default:""}},data:function(){return{editor:null}},mounted:function(){this.init()},methods:{init:function(){var e=this,t=this;ClassicEditor.create(document.querySelector("#editor"),{ckfinder:{uploadUrl:"/ckfinder/connector?command=QuickUpload&type=Files&responseType=json"},toolbar:{shouldNotGroupWhenFull:!0},fontFamily:{options:["Arial"]}}).then((function(a){a.editing.view.change((function(t){t.setStyle("min-height","600px",a.editing.view.document.getRoot()),a.setData(decodeURI(e.value))})),a.model.document.on("change:data",(function(e){t.$emit("input",encodeURI(a.getData()))})),t.editor=a})).catch((function(e){console.error("There was a problem initializing the editor.",e)}))}},beforeDestroy:function(){this.editor&&this.editor.destroy()}},c=l,u=a("2877"),p=a("475d"),d=a.n(p),m=Object(u["a"])(c,n,o,!1,null,"29a6b607",null);"function"===typeof d.a&&d()(m);var f=m.exports,h={name:"topic",components:{CKEditor:f},data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,queryParams:{adminId:"",questionName:"",source:"",paperId:"",status:"1",page:1,pageSize:20},list:[],sourceOptions:[],paperNameOptions:[],questionSubjectOptions:[],questionTypeOptions:[{dictLabel:"单选",dictValue:"1"}],title:"题目新增",form:{},rules:{questionNameEn:[{required:!0,message:"题目名称（英文）不能为空",trigger:"blur"}],paperId:[{required:!0,message:"所属试卷不能为空",trigger:"blur"}],questionPoints:[{required:!0,message:"问题分数不能为空",trigger:"blur"}],difficulty:[{required:!0,message:"题目难度不能为空",trigger:"blur"}],confidence:[{required:!0,message:"问题置信度不能为空",trigger:"blur"}],questionSubject:[{required:!0,message:"问题主题不能为空",trigger:"blur"}],questionType:[{required:!0,message:"问题类型不能为空",trigger:"blur"}],source:[{required:!0,message:"题目来源不能为空",trigger:"blur"}]},isEdit:!1,answerList:[{answerContentCn:"",answerContentEn:""}]}},created:function(){this.getList(1)},methods:{changeTopicStatus:function(e){var t=this,a="1"===e.status?"停用":"启用";this.$confirm("是否确认"+a+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["k"])({adminId:t.$store.state.user.userId,questionId:e.id,status:"1"===e.status?"0":"1"}).then((function(e){t.msgSuccess("修改成功"),t.getList()}))}))},handleAnswerClick:function(e,t){this.answerList.map((function(e){e.correct=!1})),e.correct=!0,this.$forceUpdate()},getList:function(e){var t=this,a={adminId:this.$store.state.user.userId,page:this.queryParams.page.toString(),pageSize:"20",paperId:"",questionName:"",source:"",status:""};this.loading=!0,1==this.queryParams.page&&(a.page="",a.paperId=this.queryParams.paperId,a.questionName=this.queryParams.questionName,a.difficulty=this.queryParams.difficulty,a.confidence=this.queryParams.confidence,a.source=this.queryParams.source,a.status=this.queryParams.status),Object(s["f"])(a).then((function(e){if(t.list=e.TopicList,e.totalRecord&&(t.total=parseInt(e.totalRecord)),t.loading=!1,e.searchOptions&&e.searchOptions.length){t.sourceOptions=[],t.questionSubjectOptions=[],t.questionTypeOptions=[],t.paperNameOptions=[];var a=e.searchOptions[0];a.source&&(t.sourceOptions=a.source.split(",")),a.questionSubject&&(t.questionSubjectOptions=a.questionSubject.split(",")),a.questionType&&(t.questionTypeOptions=a.questionType.split(","));var i=a.paperName.split(","),r=a.paperId.split(",");r.map((function(e,a){t.paperNameOptions.push({dictLabel:i[a],dictValue:e})}))}}))},handleAddAnswer:function(){this.answerList.push({answerContentCn:"",answerContentEn:""})},handleRemoveAnswer:function(e,t){this.answerList.splice(t,1)},handleAdd:function(){this.reset(),this.isEdit=!0,this.title="题目新增"},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.jobId})),this.single=1!=e.length,this.multiple=!e.length},handleQuery:function(){this.queryParams.page=1,this.getList()},resetQuery:function(){this.$refs["queryForm"]&&this.$refs["queryForm"].resetFields(),this.queryParams.status="1",this.handleQuery()},handleUpdate:function(e){var t=this;this.reset();var a=e.id||this.ids;Object(s["e"])({questionId:a,adminId:this.$store.state.user.userId}).then((function(e){"string"!==typeof e?(t.form=e,t.form.answerList.map((function(e){e.answerId===t.form.correctAnswer?e.correct=!0:e.correct=!1})),t.answerList=t.form.answerList,t.isEdit=!0,t.title="题目编辑"):t.$message.error("数据解析失败")}))},cancel:function(){this.isEdit=!1},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var a=e.answerList.filter((function(e){return e.correct}));if(0===a.length)return e.$message.error("请设置正确答案"),!1;if(void 0!=e.form.questionId){var i=JSON.parse(JSON.stringify(e.answerList));i.map((function(e,t){e.correct?(e.correctAnswerFlag="1",delete e.correct):(e.correctAnswerFlag="0",delete e.correct)}));var r="试卷";e.paperNameOptions.map((function(t){t.dictValue===e.form.paperId&&(r=t.dictLabel)}));var n={adminId:e.$store.state.user.userId,paperId:e.form.paperId,paperName:r,questionId:e.form.questionId,questionNameEn:e.form.questionNameEn,questionNameCn:e.form.questionNameCn,difficulty:e.form.difficulty,confidence:e.form.confidence,clarify:e.form.clarify,videoUrl:e.form.videoUrl,videoSign:e.form.videoSign,questionPoints:e.form.questionPoints.toString(),questionSubject:e.form.questionSubject,questionType:e.form.questionType,source:e.form.source,status:e.form.status,answerList:i};Object(s["l"])(n).then((function(t){e.msgSuccess("修改成功"),e.isEdit=!1,e.getList()}))}else{var o=JSON.parse(JSON.stringify(e.answerList));o.map((function(e,t){e.correct?(e.correctAnswerFlag="1",delete e.correct):(e.correctAnswerFlag="0",delete e.correct)}));var l="试卷";e.paperNameOptions.map((function(t){t.dictValue===e.form.paperId&&(l=t.dictLabel)}));var c={adminId:e.$store.state.user.userId,paperId:e.form.paperId,paperName:l,questionNameEn:e.form.questionNameEn,questionNameCn:e.form.questionNameCn,difficulty:e.form.difficulty,confidence:e.form.confidence,clarify:e.form.clarify,videoUrl:e.form.videoUrl,videoSign:e.form.videoSign,questionPoints:e.form.questionPoints.toString(),questionSubject:e.form.questionSubject,questionType:e.form.questionType,source:e.form.source,status:e.form.status,answerList:o};Object(s["a"])(c).then((function(t){e.msgSuccess("新增成功"),e.isEdit=!1,e.getList()}))}}}))},reset:function(){this.form={questionNameEn:void 0,questionNameCn:void 0,paperId:void 0,paperName:void 0,difficulty:void 0,confidence:void 0,clarify:void 0,videoUrl:void 0,videoSign:void 0,source:void 0,questionType:"1",questionSubject:"CDMP",questionPoints:1,status:"1"},this.answerList=[{answerContentCn:"",answerContentEn:""}],this.$refs["form"]&&this.$refs["form"].resetFields()}}},b=h,y=(a("8130"),Object(u["a"])(b,i,r,!1,null,"225f48ed",null));t["default"]=y.exports}}]);